<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Completing Assignments: the git workflow</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="../3700.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Completing Assignments: the git workflow</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#required-git-version">Required git Version</a>
<ul>
<li><a href="#updating-on-redhatcentos-7">Updating on RedHat/CentOS
7</a></li>
</ul></li>
<li><a href="#quick-reference-and-summary">Quick Reference and
Summary</a></li>
<li><a href="#working-in-the-terminal">Working in the Terminal</a></li>
<li><a href="#workstation-options">Workstation Options</a>
<ul>
<li><a href="#option-1-remote-access-with-ssh">Option 1: Remote Access
with <code>ssh</code></a>
<ul>
<li><a href="#keep-your-session-alive-with-tmux">Keep Your Session Alive
with <code>tmux</code></a></li>
</ul></li>
<li><a href="#option-2-personal-windows-computer-using-cygwin">Option 2:
Personal Windows Computer using Cygwin</a></li>
<li><a href="#option-3-linux-lab-in-el-103">Option 3: Linux Lab in EL
103</a></li>
</ul></li>
<li><a href="#git-procedures"><code>git</code> Procedures</a>
<ul>
<li><a href="#setting-up-your-clone">Setting Up Your Clone</a></li>
<li><a href="#daily-synchronization">Daily Synchronization</a></li>
<li><a href="#hourly-synchronization">Hourly(+) Synchronization</a></li>
<li><a href="#managing-repository-files">Managing Repository
Files</a></li>
</ul></li>
<li><a href="#programming-the-basys3-board">Programming the Basys3
Board</a>
<ul>
<li><a href="#method-1-vivado-hardware-manager">Method 1: Vivado
Hardware Manager</a></li>
<li><a href="#method-2-usb-thumbdrive">Method 2: USB Thumbdrive</a></li>
<li><a href="#option-vivado-lab-edition">Option: Vivado Lab
Edition</a></li>
</ul></li>
<li><a href="#requesting-help">Requesting Help</a></li>
</ul>
</nav>
<h1 id="required-git-version">Required git Version</h1>
<p><strong>Important</strong>: this tutorial requires <code>git</code>
version 2.25.0 or higher. To check your version, open a terminal window
and run</p>
<pre><code>git --version</code></pre>
<p>If the version is earlier than 2.25.0, then you need to install a
more recent release of <code>git</code>.</p>
<h2 id="updating-on-redhatcentos-7">Updating on RedHat/CentOS 7</h2>
<p>If you are using a Linux OS based on Red Hat 7 (like the ECE External
USB drive), then you can follow the procedure below to update your git
version. These commands require superuser permission (the user
<code>student</code> has superuser permissions on the ECE USB
drive).</p>
<pre><code>sudo yum -y remove git
sudo yum -y remove git-*
sudo yum -y install https://packages.endpoint.com/rhel/7/os/x86_64/endpoint-repo-1.9-1.x86_64.rpm
sudo yum -y install git</code></pre>
<p>Once these commands complete successfully, check the version
again:</p>
<pre><code>git --version</code></pre>
<p>You should see version 2.34.1 or higher.</p>
<h1 id="quick-reference-and-summary">Quick Reference and Summary</h1>
<p>In this course you will receive assignments and submit work using a
<strong>git repository</strong>.</p>
<figure>
<img src="figures/git_reference_sheet.svg" style="width:100.0%"
alt="Quick reference for git workflow. Click here for PDF version." />
<figcaption aria-hidden="true">Quick reference for <code>git</code>
workflow. <a href="figures/git_reference_sheet.pdf">Click here for PDF
version.</a></figcaption>
</figure>
<p>Your personal repository is a <strong>fork</strong> of the
assignments developed for this course. You may <strong>clone</strong>
your personal fork onto your own computer, or onto one of the available
remote-access servers, or both. As you complete assignments, you will
<strong>push</strong> (synchronize) your edits from your clone to your
fork. The instructor can access your fork and provide direct assistance
by editing files in your fork repository. To retrieve edits from the
instructor, you <strong>pull</strong> changes from your fork to your
local clone.</p>
<p>The original published assignments are referred to as the
<strong>upstream</strong> repository. Occasionally the instructor will
make corrections or additions to the upstream repository. You can
<strong>fetch</strong> and <strong>merge</strong> those changes to keep
your fork and clone up-to-date with the instructor. The upstream
repository can contain multiple versions; the main version is called the
<strong>master</strong>.</p>
<figure>
<img src="figures/repository_organization.svg" style="width:150.0%"
alt="Illustration of a session workflow." />
<figcaption aria-hidden="true">Illustration of a session
workflow.</figcaption>
</figure>
<p>Review of terms:</p>
<ul>
<li><strong>upstream</strong> – the instructor’s public repository</li>
<li><strong>master</strong> – the primary “golden” version of the
assignments</li>
<li><strong>fork</strong> – student’s server-side duplicate of the
upstream/master repository, instructor can access</li>
<li><strong>clone</strong> – student’s private “working copy”,
instructor cannot access</li>
<li><strong>push</strong> – upload changes from student’s clone to the
fork on the server</li>
<li><strong>pull</strong> – download changes from student’s fork on the
server</li>
<li><strong>fetch</strong> – download updates from the instructor’s
master repository</li>
<li><strong>merge</strong> – update student’s clone with changes after
fetch</li>
</ul>
<h1 id="working-in-the-terminal">Working in the Terminal</h1>
<p>This lab-focused course is designed so that <strong>all assignments
can be completed using a terminal program</strong> (i.e. text command
interface). Using the terminal, a student can open a remote connection
to a server in the ECE department. This setup allows students to
complete the assigned work using any computer with a terminal program –
Linux, Windows, or even a ChromeBook. Since a terminal is text-based, a
high-speed internet connection is not necessarily required.</p>
<p>The required Xilinx software tools are pre-configured on the server.
Each assignment uses a <code>Makefile</code> to control the software
tools from within the terminal. Using this procedure, all simulations,
synthesis, implementation, and bitstream generation steps are run on the
high-powered server rather than on your personal computer.</p>
<h1 id="workstation-options">Workstation Options</h1>
<p>There are several ways to approach the laboratory tasks in this
course. The main options are listed below. You can use any of these
options at any time, or you can mix different strategies based on what’s
most appropriate for your own needs and circumstances. With any of these
options, <strong>the main thing is that you use <code>git</code> to keep
your files synchronized with the server and the professor.</strong></p>
<h2 id="option-1-remote-access-with-ssh">Option 1: Remote Access with
<code>ssh</code></h2>
<p>To access the servers, you will need a <strong>secure shell
(<code>ssh</code>) terminal</strong>. In Linux, you only need to open a
Terminal or Konsole program and type the <code>ssh</code> command like
this:</p>
<pre><code>ssh &lt;username&gt;@genesys.bluezone.usu.edu</code></pre>
<p>where you replace <code>&lt;username&gt;</code> with your account
name. All registered students will be emailed an account and password
during the first week of the course. At present, there is one server
available:</p>
<ul>
<li><code>genesys.bluezone.usu.edu</code></li>
</ul>
<p>In addition to the genesys server, you should be able to complete
most of your assignments in the ECE Linux Lab. The Linux Lab computers
are accessible using your A-number and campus password. You can login
remotely at these addresses:</p>
<ul>
<li><code>el103-01.ece.usu.edu</code></li>
<li><code>el103-02.ece.usu.edu</code></li>
<li><code>el103-03.ece.usu.edu</code></li>
<li>… and so on …</li>
</ul>
<p>Since these servers are on a protected network, you will need to be
either <strong>on campus</strong> (e.g. in a computer lab, dorm room or
other campus location), or you need to connect to the <strong>Virtual
Private Network (VPN)</strong> before attempting to access these
servers.</p>
<p>On some versions of Windows, you should be able to access the “Linux
subsystem” or install “Ubuntu for Windows” or “Cygwin” environment to
provide a Linux-like terminal program. Alternately you can use a
dedicated Windows-based terminal program like PuTTY.</p>
<h3 id="keep-your-session-alive-with-tmux">Keep Your Session Alive with
<code>tmux</code></h3>
<p>Once you start working on the server, you will probably want to keep
your session active even if you need to leave for a while or your
connection drops. You can do this using the <code>tmux</code> command or
the GNU <code>screen</code> command. Newer distributions generally
provide the <code>tmux</code> command, so we will use it for this
tutorial.</p>
<p>After logging into a server, run</p>
<pre><code>tmux a</code></pre>
<p>This tries to attach to an existing session. If it answers <code>no
session</code>, then just run <code>tmux</code> without the
<code>a</code> option to create a new session.</p>
<p>The <code>tmux</code> session runs independently of your network
connection. To leave the session, type <code>Ctrl-b d</code> to
<strong>detatch</strong> from the session. You can re-attach to it later
by running <code>tmux a</code> again. This is especially useful for
running long compile jobs, or for maintaining a long-term work session.
It’s also good if you lose your network connection, the session will
still be there and you shouldn’t lose any work.</p>
<h2 id="option-2-personal-windows-computer-using-cygwin">Option 2:
Personal Windows Computer using Cygwin</h2>
<p>If you are using a Windows computer with sufficient free disk space,
you can setup the Cygwin environment following instructions provided in
a separate document. You will need to create your own Xilinx account and
install Vivado on your own. There are not usually any problems in the
Vivado or Cygwin install processes, but they can be quite time consuming
and take a lot disk space and memory.</p>
<h2 id="option-3-linux-lab-in-el-103">Option 3: Linux Lab in EL 103</h2>
<p>You can use the Linux Lab computers which already have Xilinx tools
and <code>git</code> installed. You can use these machines on-site or
remotely.</p>
<h1 id="git-procedures"><code>git</code> Procedures</h1>
<h2 id="setting-up-your-clone">Setting Up Your Clone</h2>
<p>First, <strong>open a terminal program</strong>. Then decide whether
you want to work on your personal machine or on the server. If working
on the server, use <code>ssh</code> to access one of the available
servers. You will probably want to use the same server throughout the
semester, however you can change at any time by repeating this step to
establish a new clone:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://<span class="op">&lt;</span>username<span class="op">&gt;</span>:<span class="op">&lt;</span>password<span class="op">&gt;</span>@left.engr.usu.edu/git/<span class="op">&lt;</span>username<span class="op">&gt;</span>/3700 </span></code></pre></div>
<p>Replace <code>&lt;username&gt;</code> with your account name and
<password> with your provided password. This will create a new directory
named <code>3700</code>. Next, navigate into the newly created
<code>3700</code> directory, and run this command to define the
<code>upstream</code> repository:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> remote add upstream https://<span class="op">&lt;</span>username<span class="op">&gt;</span>:<span class="op">&lt;</span>password<span class="op">&gt;</span>@left.engr.usu.edu/git/3700</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> fetch upstream</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> merge upstream/master</span></code></pre></div>
<p>This will bring your fork up to date with the instructor’s public
repository.</p>
<h2 id="daily-synchronization">Daily Synchronization</h2>
<p>Each time you sit down to do work for ECE 3700, you should run these
commands:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> pull origin master </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> fetch upstream</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> merge upstream/master</span></code></pre></div>
<p>This will synchronize any updates from the instructor.</p>
<h2 id="hourly-synchronization">Hourly(+) Synchronization</h2>
<p>After making significant changes to your clone, you should
synchronize them with the server using these commands:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-a</span> <span class="at">-m</span> <span class="st">&quot;&lt;description of changes&gt;&quot;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push origin master</span></code></pre></div>
<h2 id="managing-repository-files">Managing Repository Files</h2>
<p>Any time you <strong>create a file</strong> you should
<code>add</code> it to the repository:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add <span class="op">&lt;</span>filename<span class="op">&gt;</span></span></code></pre></div>
<p>You can check the status of all files in a directory by running</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> status .</span></code></pre></div>
<p>It’s okay to have some un-tracked files in your clone. Make sure to
add all source files (<code>*.v</code>, <code>*.xdc</code>), and
bitstream files (<code>*.bit</code>) since the instructor will need to
see them.</p>
<p>If you need to <strong>move</strong> or <strong>delete</strong>
tracked files, you should do so using the <code>git</code> commands;
<strong>DON’T USE THE FILE BROWSER TO MOVE OR DELETE TRACKED
FILES</strong>. You can use ordinary <code>mv</code> and <code>rm</code>
commands for untracked files, otherwise use these:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> mv <span class="op">&lt;</span>old filename<span class="op">&gt;</span> <span class="op">&lt;</span>new filename<span class="op">&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> rm <span class="op">&lt;</span>filename<span class="op">&gt;</span></span></code></pre></div>
<h1 id="programming-the-basys3-board">Programming the Basys3 Board</h1>
<p>There are two ways to program the board.</p>
<h2 id="method-1-vivado-hardware-manager">Method 1: Vivado Hardware
Manager</h2>
<p>If you have Vivado installed on your computer, you can use the
Hardware Manager to connect to your Basys3 device and program it with
the compiled bitstream device. The procedure for this is the same as
used in ECE 2700.</p>
<h2 id="method-2-usb-thumbdrive">Method 2: USB Thumbdrive</h2>
<p>If you create a bitstream file remotely, you can copy the bitstream
file onto a USB thumbdrive. There should be <strong>only one
<code>.bit</code> file on the thumbdrive</strong>. With the Basys3
powered OFF, plug the thumbdrive into the USB port on the upper right
side of the board (north of the pushbuttons). Next to the USB port is a
jumper labeled <code>J1</code> with three settings: JTAG, QSPI, and USB.
Move the jumper to the USB setting, then turn ON the Basys3 power. It
will take a few seconds to load the bitstream onto the board.</p>
<h2 id="option-vivado-lab-edition">Option: Vivado Lab Edition</h2>
<p>You have the option to implement the bitstream file on the server,
then transfer it to your local computer. In order to program the board,
you only need to have the <strong>Vivado Lab Edition</strong>, a much
quicker installation than the full Vivado product. The Lab Edition
includes the Hardware Manager, which is a little more convenient than
USB programming.</p>
<h1 id="requesting-help">Requesting Help</h1>
<p>When you need help from the instructor or TA, navigate to the
directory where you need help and create a text file called
<code>help</code>. Type a <strong>detailed description of your
problem</strong> and save the file. Then add it to the repository:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add help</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit . <span class="at">-m</span> <span class="st">&quot;Requesting help&quot;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push origin master</span></code></pre></div>
<p>You can separately notify a TA or instructor about your help request,
then they can sync your repository and read the details in your
<code>help</code> file. The instructor’s responses should be appended to
the <code>help</code> file, and the TA/instructor may edit files within
your design. To retrieve updates, pull from the server:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> pull origin master</span></code></pre></div>
<p>If the instructor has handled your question, you should see updates
in the <code>help</code> file and possibly other files if they were
involved in the help request.</p>
<p><strong>You can always contact the instructor via Canvas message, but
technical issues are handled more effectively using <code>git</code>
with <code>help</code> files.</strong> I recommend carefully documenting
your problem in the <code>help</code> file before reaching out to the
instructor or TA.</p>
</body>
</html>
